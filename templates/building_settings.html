{% extends 'base.html' %}
{% block title %}Панель управления{% endblock %}
{% load static %}

{% block content %}
{% load crispy_forms_tags %}
{% csrf_token %}



            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid">
                        <h1 class="mt-4">Настройки карточки объекта
                            </h1>
<!--                        <ol class="breadcrumb mb-4">-->
<!--                            <li class="breadcrumb-item active">Sensors</li>-->
<!--                        </ol>-->
                        <form method="POST">{% csrf_token %}
                            {{ building_form|crispy }}

                        <button type="submit" name="phone_number_form">
                            Сохранить
                        </button>

                        </form>

         {% endblock %}
        {% block scripts %}
            <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
            <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
            <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>


            <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js" integrity="sha512-rmZcZsyhe0/MAjquhTgiUcb4d9knaFc7b5xAfju483gbEXTkeJRUMIPk6s3ySZMYUHEcjKbjLjyddGWMrNEvZg==" crossorigin="anonymous"></script>
            <script src='https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js'></script>



            <script>
        var data = {{ data|safe }}
        let datasets = []

        for (let item of data) {
          datasets.push({
                label: item[0],
                borderColor: '#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6),
                fill: false,
                data: item[1]
          });
        }


        var ctx = document.getElementById('snow_sens').getContext('2d');
        var chart = new Chart(ctx, {
          type: 'line',
          data: { datasets: datasets },
          options: {
            scales: {
              xAxes: [{
                type: 'time',
                time: {
                  unit: 'minute'
                }
              }]
            }
          }
        });

    </script>

            <script>

        var temperature_data = {{ temperature|safe }}

        var temperature = {
          label: 'Температура',
          borderColor: 'red',
          data: temperature_data
        };

        var ctx = document.getElementById('temp_API').getContext('2d');
        var chart = new Chart(ctx, {
          type: 'line',
          data: { datasets: [temperature] },
          options: {
            scales: {
              xAxes: [{
                type: 'time',
                time: {
                  unit: 'minute'
                }
              }]
            }
          }
        });

    </script>

            <script>

        var snow_data = {{ snow|safe }}

        var snow = {
          label: 'Показания осадков',
          borderColor: 'blue',
          data: snow_data
        };

        var ctx = document.getElementById('snow_API').getContext('2d');
        var chart = new Chart(ctx, {
          type: 'line',
          data: { datasets: [snow] },
          options: {
            scales: {
              xAxes: [{
                type: 'time',
                time: {
                  unit: 'minute'
                }
              }]
            }
          }
        });

    </script>



            <script src="{% static 'src/assets/demo/datatables-demo.js' %}"></script>
            <script src="{% static 'src/assets/demo/chart-bar-demo.js' %}"></script>
            <script src="{% static 'src/assets/demo/chart-area-demo.js' %}"></script>
            <script src="{% static 'src/js/scripts.js' %}"></script>
        {% endblock %}



</html>